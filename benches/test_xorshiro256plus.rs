#![feature(test)]
extern crate test;
use test::Bencher;
use rand::Rng;

use vec_rand::xorshiro256plus::*;


#[bench]
fn test_thread_rng(b: &mut Bencher) {
    let mut rng = rand::thread_rng();
    b.iter(|| {
        rng.gen_range(0, 10000)
    });
}


#[bench]
fn test_xorshiro256plus(b: &mut Bencher) {
    let mut seed: [u64; 4] = [
        6591408588322595484,
        5451729388608518856,
        8913376598984957243,
        17912695770704705270,
    ];

    b.iter(|| {
        xorshiro256plus(& mut seed)
    });
}

#[bench]
fn test_xorshiro256plus_avx(b: &mut Bencher) {
    let mut seed: [u64; 16] = [
        6591408588322595484, 5451729388608518856, 8913376598984957243, 17912695770704705270,
        6591408588322595484, 5451729388608518856, 8913376598984957243, 17912695770704705270,
        6591408588322595484, 5451729388608518856, 8913376598984957243, 17912695770704705270,
        6591408588322595484, 5451729388608518856, 8913376598984957243, 17912695770704705270,
    ];

    b.iter(|| {
        xorshiro256plus_avx(& mut seed)
    });
}

#[bench]
fn test_xorshiro256plus_avx_ss4(b: &mut Bencher) {
    let mut seed: [u64; 64] = [
        6591408588322595484, 5451729388608518856, 8913376598984957243, 17912695770704705270,
        6591408588322595484, 5451729388608518856, 8913376598984957243, 17912695770704705270,
        6591408588322595484, 5451729388608518856, 8913376598984957243, 17912695770704705270,
        6591408588322595484, 5451729388608518856, 8913376598984957243, 17912695770704705270,
        6591408588322595484, 5451729388608518856, 8913376598984957243, 17912695770704705270,
        6591408588322595484, 5451729388608518856, 8913376598984957243, 17912695770704705270,
        6591408588322595484, 5451729388608518856, 8913376598984957243, 17912695770704705270,
        6591408588322595484, 5451729388608518856, 8913376598984957243, 17912695770704705270,
        6591408588322595484, 5451729388608518856, 8913376598984957243, 17912695770704705270,
        6591408588322595484, 5451729388608518856, 8913376598984957243, 17912695770704705270,
        6591408588322595484, 5451729388608518856, 8913376598984957243, 17912695770704705270,
        6591408588322595484, 5451729388608518856, 8913376598984957243, 17912695770704705270,
        6591408588322595484, 5451729388608518856, 8913376598984957243, 17912695770704705270,
        6591408588322595484, 5451729388608518856, 8913376598984957243, 17912695770704705270,
        6591408588322595484, 5451729388608518856, 8913376598984957243, 17912695770704705270,
        6591408588322595484, 5451729388608518856, 8913376598984957243, 17912695770704705270,
    ];

    b.iter(|| {
        xorshiro256plus_avx_ss4(& mut seed)
    });
}